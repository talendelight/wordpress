# WP-03.1: User Registration and Profile Feature

**Feature ID:** WP-03.1  
**Parent Epic:** WP-03 (User Management)  
**Status:** üìù Draft  
**Created:** January 16, 2026

---

## 1. Overview

### 1.1 Purpose
Enable multi-role user registration with a multi-step form, custom fields per role, manager approval workflow, and user profile page.

### 1.2 User Roles
- Candidate
- Employer
- Scout
- Operator
- Manager

---

## 2. Registration Flow

### 2.1 Multi-Step Registration
- **Step 1:** User selects their role (radio/select: Candidate, Employer, Scout, Operator, Manager)
- **Step 2:** Show custom fields based on selected role (see below)
- **Step 3:** User submits registration; account is created as "pending approval"


### 2.2 Approval Workflow
- After registration, user cannot log in until approved by a Manager
 - Manager receives notification of new registration (email or dashboard; email/SMS notifications are only sent in production and only if the manager has enabled them in their profile)
- Manager reviews and approves/rejects user
- Upon approval, user receives email and can log in
- All approval requests and status changes are tracked in a generic table: `td_user_registration_approvals` (supports all user types)
- The approval system is designed to support future self-service profile updates, with manager or self-approval required per field (see below)

---

## 3. Custom Fields by Role


### 3.1 Candidate, Scout, Operator, Manager (Person Registration Form)
The following fields are present in the Person Registration Form (Forminator, ID: 364):

- Prefix (Required)
- First Name (Required)
- Middle Name (Required)
- Last Name/Surname (Required)
- Email Address (Required, with confirmation)
- Phone (Required)
- How would you like to share your profile? (Checkbox: LinkedIn or CV/Resume)
- LinkedIn Profile (Required if LinkedIn selected)
- Upload CV/Resume (Required if CV/Resume selected)
- Upload National ID of Country of Citizenship (Required)
- Do you live in your Country of Citizenship? (Radio: Yes/No)
- Upload National ID of Country of Residence (Required if 'No' selected above)
- Option to mark Citizenship ID and Residence ID as the same document
- Consent (Required)
- CAPTCHA (reCAPTCHA v2)

#### Conditional Logic
- LinkedIn Profile field is shown only if user selects LinkedIn as profile sharing method.
- CV/Resume upload field is shown only if user selects CV/Resume as profile sharing method.
- Residence ID upload field is shown only if user selects 'No' for country of citizenship question.

#### File Uploads
- CV/Resume: Accepts .pdf, .doc, .docx, .pptx (max 10MB)
- National ID: Accepts .pdf, .jpeg, .png (max 10MB)

#### Compliance
- Consent field includes privacy policy and terms links.
- CAPTCHA is required for spam prevention.

_This form is used for Candidate, Scout, Operator, and Manager registration._

#### Identity Verification (All Roles)
- Citizenship ID Upload (e.g., passport, residence permit) (Required on registration and when changing name)
- Residence ID Upload (Required on registration and when changing name)
- Option to mark Citizenship ID and Residence ID as the same document

### 3.2 Employer
- First Name (Required)
- Middle Name (Optional)
- Last Name/Surname (Required)
- Email Address (Required)
- Phone (Required)
- Company Website (Required)
- Consent (Required)

### 3.3 Scout
- First Name (Required)
- Middle Name (Optional)
- Last Name/Surname (Required)
- Email Address (Required)
- Phone (Required)
- LinkedIn Profile (Required)
- Consent (Required)

### 3.4 Operator
- First Name (Required)
- Middle Name (Optional)
- Last Name/Surname (Required)
- Email Address (Required)
- Phone (Required)
- LinkedIn Profile (Required)
- Consent (Required)

### 3.5 Manager
- First Name (Required)
- Middle Name (Optional)
- Last Name/Surname (Required)
- Email Address (Required)
- Phone (Required)
- LinkedIn Profile (Required)
- Consent (Required)

---

## 4. User Profile Page
- Each user has a profile page displaying their registration info and custom fields
- Profile page is only accessible after approval/login
- Users can update certain fields (configurable per role)
 When a user updates profile fields, the following approval and audit rules apply:
	 - **First Name, Middle Name, Last Name/Surname:** Manager approval required for changes; user must upload (or re-upload) Citizenship ID and Residence ID
	 - **Email Address:** Manager approval required for changes; also integrate email verification (OTP)
	 - **Phone:** Manager approval required for changes; also integrate SMS verification (OTP)
	 - **LinkedIn Profile, CV File Upload:** No approval required
	 - **Consent:** Only consent on form required
	- All changes (pending, approved, rejected) are logged in an audit trail for compliance
	- The `td_user_registration_approvals` table tracks all approval requests, status, approver, timestamps, and change history

---

## 5. Security & Privacy
- All registration data stored securely in WordPress database
- GDPR consent and privacy policy acceptance required
- Email/phone verification (future improvement)

---

## 6. Open Actions / Improvements
- Integrate bash SQL automation script (infra/shared/scripts/apply-sql-change.sh) into CI/CD release process for production database changes, using machine-readable release instructions as input
- Integrate SQL schema/application changes into CI/CD pipeline as an automated step, using machine-readable release instructions as input
- Implement email and phone verification (integrate OTP system; required for email/phone changes and manager approval)
- Add CAPTCHA to registration form
- Add audit log for all profile changes and approvals/rejections (using `td_user_registration_approvals`)
- Design profile page layout per role
- Integrate with notification system for manager alerts (ensure manager can enable/disable email/SMS notifications in their profile; notifications only sent in production)

---

## 7. References
- Related: [WP-01.6-candidate-landing-page.md](WP-01.6-candidate-landing-page.md)
- Related: [WP-02.1-user-registration-form.md](WP-02.1-user-registration-form.md)

---

## 8. History
| Version | Description | Date | Author |
|---|---|---|---|
| 0.1 | Initial feature doc for user registration and profile | 2026-01-16 | Lochness BD Team |
